<html lang="en">
<head>
<title>Installing GCC: Old documentation</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Installing GCC: Old documentation">
<meta name="generator" content="makeinfo 4.7">
<link title="Top" rel="top" href="#Top">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1988, 1989, 1992, 1993, 1994, 1995, 1996, 1997, 1998,
1999, 2000, 2001, 2002, 2003 Free Software Foundation, Inc.

   Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.2 or
any later version published by the Free Software Foundation; with no
Invariant Sections, the Front-Cover texts being (a) (see below), and
with the Back-Cover Texts being (b) (see below).  A copy of the
license is included in the section entitled "GNU Free Documentation License".

(a) The FSF's Front-Cover Text is:

     A GNU Manual

(b) The FSF's Back-Cover Text is:

     You have freedom to copy and modify this GNU Manual, like GNU
     software.  Copies published by the Free Software Foundation raise
     funds for GNU development.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc { font-variant:small-caps }
  span.roman { font-family: serif; font-weight: normal; } 
--></style>
</head>
<body>
<h1 class="settitle">Installing GCC: Old documentation</h1>
<h1 align="center">Old installation documentation</h1>

   <p>Note most of this information is out of date and superseded by the
previous chapters of this manual.  It is provided for historical
reference only, because of a lack of volunteers to merge it into the
main manual.

   <p>Here is the procedure for installing GNU CC on a GNU or Unix system. 
See <a href="#VMS-Install">VMS Install</a>, for VMS systems.

     <ol type=1 start=1>
<li>If you have chosen a configuration for GNU CC which requires other GNU
tools (such as GAS or the GNU linker) instead of the standard system
tools, install the required tools in the build directory under the names
<span class="file">as</span>, <span class="file">ld</span> or whatever is appropriate.

     <p>Alternatively, you can do subsequent compilation using a value of the
<code>PATH</code> environment variable such that the necessary GNU tools come
before the standard system tools.

     <li>Specify the host, build and target machine configurations.  You do this
when you run the <span class="file">configure</span> script.

     <p>The <dfn>build</dfn> machine is the system which you are using, the
<dfn>host</dfn> machine is the system where you want to run the resulting
compiler (normally the build machine), and the <dfn>target</dfn> machine is
the system for which you want the compiler to generate code.

     <p>If you are building a compiler to produce code for the machine it runs
on (a native compiler), you normally do not need to specify any operands
to <span class="file">configure</span>; it will try to guess the type of machine you are on
and use that as the build, host and target machines.  So you don't need
to specify a configuration when building a native compiler unless
<span class="file">configure</span> cannot figure out what your configuration is or guesses
wrong.

     <p>In those cases, specify the build machine's <dfn>configuration name</dfn>
with the <span class="option">--host</span> option; the host and target will default to be
the same as the host machine.  (If you are building a cross-compiler,
see <a href="#Cross_002dCompiler">Cross-Compiler</a>.)

     <p>Here is an example:

     <pre class="smallexample">          ./configure --host=sparc-sun-sunos4.1
     </pre>
     <p>A configuration name may be canonical or it may be more or less
abbreviated.

     <p>A canonical configuration name has three parts, separated by dashes. 
It looks like this: <var>cpu</var><span class="samp">-</span><var>company</var><span class="samp">-</span><var>system</var>. 
(The three parts may themselves contain dashes; <span class="file">configure</span>
can figure out which dashes serve which purpose.)  For example,
<span class="samp">m68k-sun-sunos4.1</span> specifies a Sun 3.

     <p>You can also replace parts of the configuration by nicknames or aliases. 
For example, <span class="samp">sun3</span> stands for <span class="samp">m68k-sun</span>, so
<span class="samp">sun3-sunos4.1</span> is another way to specify a Sun 3.

     <p>You can specify a version number after any of the system types, and some
of the CPU types.  In most cases, the version is irrelevant, and will be
ignored.  So you might as well specify the version if you know it.

     <p>See <a href="#Configurations">Configurations</a>, for a list of supported configuration names and
notes on many of the configurations.  You should check the notes in that
section before proceeding any further with the installation of GNU CC.

        </ol>

   <p><h2><a name="Configurations"></a>Configurations Supported by GNU CC</h2><a name="index-configurations-supported-by-GNU-CC-1"></a>
Here are the possible CPU types:

   <blockquote>
<!-- gmicro, fx80, spur and tahoe omitted since they don't work. -->
1750a, a29k, alpha, arm, avr, c<var>n</var>, clipper, dsp16xx, elxsi, fr30, h8300,
hppa1.0, hppa1.1, i370, i386, i486, i586, i686, i786, i860, i960, ip2k, m32r,
m68000, m68k, m6811, m6812, m88k, mcore, mips, mipsel, mips64, mips64el,
mn10200, mn10300, ns32k, pdp11, powerpc, powerpcle, romp, rs6000, sh, sparc,
sparclite, sparc64, v850, vax, we32k. 
</blockquote>

   <p>Here are the recognized company names.  As you can see, customary
abbreviations are used rather than the longer official names.

<!-- What should be done about merlin, tek*, dolphin? -->
<blockquote>
acorn, alliant, altos, apollo, apple, att, bull,
cbm, convergent, convex, crds, dec, dg, dolphin,
elxsi, encore, harris, hitachi, hp, ibm, intergraph, isi,
mips, motorola, ncr, next, ns, omron, plexus,
sequent, sgi, sony, sun, tti, unicom, wrs. 
</blockquote>

   <p>The company name is meaningful only to disambiguate when the rest of
the information supplied is insufficient.  You can omit it, writing
just <var>cpu</var><span class="samp">-</span><var>system</var>, if it is not needed.  For example,
<span class="samp">vax-ultrix4.2</span> is equivalent to <span class="samp">vax-dec-ultrix4.2</span>.

   <p>Here is a list of system types:

   <blockquote>
386bsd, aix, acis, amigaos, aos, aout, aux, bosx, bsd, clix, coff, ctix, cxux,
dgux, dynix, ebmon, ecoff, elf, esix, freebsd, hms, genix, gnu, linux,
linux-gnu, hiux, hpux, iris, irix, isc, luna, lynxos, mach, minix, msdos, mvs,
netbsd, newsos, nindy, ns, osf, osfrose, ptx, riscix, riscos, rtu, sco, sim,
solaris, sunos, sym, sysv, udi, ultrix, unicos, uniplus, unos, vms, vsta,
vxworks, winnt, xenix. 
</blockquote>

<p class="noindent">You can omit the system type; then <span class="file">configure</span> guesses the
operating system from the CPU and company.

   <p>You can add a version number to the system type; this may or may not
make a difference.  For example, you can write <span class="samp">bsd4.3</span> or
<span class="samp">bsd4.4</span> to distinguish versions of BSD.  In practice, the version
number is most needed for <span class="samp">sysv3</span> and <span class="samp">sysv4</span>, which are often
treated differently.

   <p><span class="samp">linux-gnu</span> is the canonical name for the GNU/Linux target; however
GNU CC will also accept <span class="samp">linux</span>.  The version of the kernel in use is
not relevant on these systems.  A suffix such as <span class="samp">libc1</span> or <span class="samp">aout</span>
distinguishes major versions of the C library; all of the suffixed versions
are obsolete.

   <p>If you specify an impossible combination such as <span class="samp">i860-dg-vms</span>,
then you may get an error message from <span class="file">configure</span>, or it may
ignore part of the information and do the best it can with the rest. 
<span class="file">configure</span> always prints the canonical name for the alternative
that it used.  GNU CC does not support all possible alternatives.

   <p>Often a particular model of machine has a name.  Many machine names are
recognized as aliases for CPU/company combinations.  Thus, the machine
name <span class="samp">sun3</span>, mentioned above, is an alias for <span class="samp">m68k-sun</span>. 
Sometimes we accept a company name as a machine name, when the name is
popularly used for a particular machine.  Here is a table of the known
machine names:

   <blockquote>
3300, 3b1, 3b<var>n</var>, 7300, altos3068, altos,
apollo68, att-7300, balance,
convex-c<var>n</var>, crds, decstation-3100,
decstation, delta, encore,
fx2800, gmicro, hp7<var>nn</var>, hp8<var>nn</var>,
hp9k2<var>nn</var>, hp9k3<var>nn</var>, hp9k7<var>nn</var>,
hp9k8<var>nn</var>, iris4d, iris, isi68,
m3230, magnum, merlin, miniframe,
mmax, news-3600, news800, news, next,
pbd, pc532, pmax, powerpc, powerpcle, ps2, risc-news,
rtpc, sun2, sun386i, sun386, sun3,
sun4, symmetry, tower-32, tower. 
</blockquote>

<p class="noindent">Remember that a machine name specifies both the cpu type and the company
name. 
If you want to install your own homemade configuration files, you can
use <span class="samp">local</span> as the company name to access them.  If you use
configuration <var>cpu</var><span class="samp">-local</span>, the configuration name
without the cpu prefix
is used to form the configuration file names.

   <p>Thus, if you specify <span class="samp">m68k-local</span>, configuration uses
files <span class="file">m68k.md</span>, <span class="file">local.h</span>, <span class="file">m68k.c</span>,
<span class="file">xm-local.h</span>, <span class="file">t-local</span>, and <span class="file">x-local</span>, all in the
directory <span class="file">config/m68k</span>.

   <p>Here is a list of configurations that have special treatment or special
things you must know:

     <dl>
<dt><span class="samp">vax-dec-vms</span><dd>See <a href="#VMS-Install">VMS Install</a>, for details on how to install GNU CC on VMS. 
</dl>

   <p><h2><a name="Cross_002dCompiler"></a>Building and Installing a Cross-Compiler</h2><a name="index-cross_002dcompiler_002c-installation-2"></a>
GNU CC can function as a cross-compiler for many machines, but not all.

     <ul>
<li>Cross-compilers for the Mips as target using the Mips assembler
currently do not work, because the auxiliary programs
<span class="file">mips-tdump.c</span> and <span class="file">mips-tfile.c</span> can't be compiled on
anything but a Mips.  It does work to cross compile for a Mips
if you use the GNU assembler and linker.

     <li>Cross-compilers between machines with different floating point formats
have not all been made to work.  GNU CC now has a floating point
emulator with which these can work, but each target machine description
needs to be updated to take advantage of it.

     <li>Cross-compilation between machines of different word sizes is
somewhat problematic and sometimes does not work. 
</ul>

   <p>Since GNU CC generates assembler code, you probably need a
cross-assembler that GNU CC can run, in order to produce object files. 
If you want to link on other than the target machine, you need a
cross-linker as well.  You also need header files and libraries suitable
for the target machine that you can install on the host machine.

   <p><h2>Steps of Cross-Compilation</h2>

   <p>To compile and run a program using a cross-compiler involves several
steps:

     <ul>
<li>Run the cross-compiler on the host machine to produce assembler files
for the target machine.  This requires header files for the target
machine.

     <li>Assemble the files produced by the cross-compiler.  You can do this
either with an assembler on the target machine, or with a
cross-assembler on the host machine.

     <li>Link those files to make an executable.  You can do this either with a
linker on the target machine, or with a cross-linker on the host
machine.  Whichever machine you use, you need libraries and certain
startup files (typically <span class="file">crt....o</span>) for the target machine. 
</ul>

   <p>It is most convenient to do all of these steps on the same host machine,
since then you can do it all with a single invocation of GNU CC.  This
requires a suitable cross-assembler and cross-linker.  For some targets,
the GNU assembler and linker are available.

   <p><h2>Configuring a Cross-Compiler</h2>

   <p>To build GNU CC as a cross-compiler, you start out by running
<span class="file">configure</span>.  Use the <span class="option">--target=</span><var>target</var> to specify the
target type.  If <span class="file">configure</span> was unable to correctly identify the
system you are running on, also specify the <span class="option">--build=</span><var>build</var>
option.  For example, here is how to configure for a cross-compiler that
produces code for an HP 68030 system running BSD on a system that
<span class="file">configure</span> can correctly identify:

<pre class="smallexample">     ./configure --target=m68k-hp-bsd4.3
</pre>
   <p><h2>Tools and Libraries for a Cross-Compiler</h2>

   <p>If you have a cross-assembler and cross-linker available, you should
install them now.  Put them in the directory
<span class="file">/usr/local/</span><var>target</var><span class="file">/bin</span>.  Here is a table of the tools
you should put in this directory:

     <dl>
<dt><span class="file">as</span><dd>This should be the cross-assembler.

     <br><dt><span class="file">ld</span><dd>This should be the cross-linker.

     <br><dt><span class="file">ar</span><dd>This should be the cross-archiver: a program which can manipulate
archive files (linker libraries) in the target machine's format.

     <br><dt><span class="file">ranlib</span><dd>This should be a program to construct a symbol table in an archive file. 
</dl>

   <p>The installation of GNU CC will find these programs in that directory,
and copy or link them to the proper place to for the cross-compiler to
find them when run later.

   <p>The easiest way to provide these files is to build the Binutils package
and GAS.  Configure them with the same <span class="option">--host</span> and <span class="option">--target</span>
options that you use for configuring GNU CC, then build and install
them.  They install their executables automatically into the proper
directory.  Alas, they do not support all the targets that GNU CC
supports.

   <p>If you want to install libraries to use with the cross-compiler, such as
a standard C library, put them in the directory
<span class="file">/usr/local/</span><var>target</var><span class="file">/lib</span>; installation of GNU CC copies
all the files in that subdirectory into the proper place for GNU CC to
find them and link with them.  Here's an example of copying some
libraries from a target machine:

<pre class="example">     ftp <var>target-machine</var>
     lcd /usr/local/<var>target</var>/lib
     cd /lib
     get libc.a
     cd /usr/lib
     get libg.a
     get libm.a
     quit
</pre>
   <p class="noindent">The precise set of libraries you'll need, and their locations on
the target machine, vary depending on its operating system.

   <p><a name="index-start-files-3"></a>Many targets require &ldquo;start files&rdquo; such as <span class="file">crt0.o</span> and
<span class="file">crtn.o</span> which are linked into each executable; these too should be
placed in <span class="file">/usr/local/</span><var>target</var><span class="file">/lib</span>.  There may be several
alternatives for <span class="file">crt0.o</span>, for use with profiling or other
compilation options.  Check your target's definition of
<code>STARTFILE_SPEC</code> to find out what start files it uses. 
Here's an example of copying these files from a target machine:

<pre class="example">     ftp <var>target-machine</var>
     lcd /usr/local/<var>target</var>/lib
     prompt
     cd /lib
     mget *crt*.o
     cd /usr/lib
     mget *crt*.o
     quit
</pre>
   <p><h2>Cross-Compilers and Header Files</h2>

   <p>If you are cross-compiling a standalone program or a program for an
embedded system, then you may not need any header files except the few
that are part of GNU CC (and those of your program).  However, if you
intend to link your program with a standard C library such as
<span class="file">libc.a</span>, then you probably need to compile with the header files
that go with the library you use.

   <p>The GNU C compiler does not come with these files, because (1) they are
system-specific, and (2) they belong in a C library, not in a compiler.

   <p>If the GNU C library supports your target machine, then you can get the
header files from there (assuming you actually use the GNU library when
you link your program).

   <p>If your target machine comes with a C compiler, it probably comes with
suitable header files also.  If you make these files accessible from the host
machine, the cross-compiler can use them also.

   <p>Otherwise, you're on your own in finding header files to use when
cross-compiling.

   <p>When you have found suitable header files, you should put them in the
directory <span class="file">/usr/local/</span><var>target</var><span class="file">/include</span>, before building the
cross compiler.  Then installation will run fixincludes properly and
install the corrected versions of the header files where the compiler
will use them.

   <p>Provide the header files before you build the cross-compiler, because
the build stage actually runs the cross-compiler to produce parts of
<span class="file">libgcc.a</span>.  (These are the parts that <em>can</em> be compiled with
GNU CC.)  Some of them need suitable header files.

   <p>Here's an example showing how to copy the header files from a target
machine.  On the target machine, do this:

<pre class="example">     (cd /usr/include; tar cf - .) &gt; tarfile
</pre>
   <p>Then, on the host machine, do this:

<pre class="example">     ftp <var>target-machine</var>
     lcd /usr/local/<var>target</var>/include
     get tarfile
     quit
     tar xf tarfile
</pre>
   <p><h2>Actually Building the Cross-Compiler</h2>

   <p>Now you can proceed just as for compiling a single-machine compiler
through the step of building stage 1.

   <p>Do not try to build stage 2 for a cross-compiler.  It doesn't work to
rebuild GNU CC as a cross-compiler using the cross-compiler, because
that would produce a program that runs on the target machine, not on the
host.  For example, if you compile a 386-to-68030 cross-compiler with
itself, the result will not be right either for the 386 (because it was
compiled into 68030 code) or for the 68030 (because it was configured
for a 386 as the host).  If you want to compile GNU CC into 68030 code,
whether you compile it on a 68030 or with a cross-compiler on a 386, you
must specify a 68030 as the host when you configure it.

   <p>To install the cross-compiler, use <span class="samp">make install</span>, as usual.

   <p><h2><a name="VMS-Install"></a>Installing GNU CC on VMS</h2><a name="index-VMS-installation-4"></a><a name="index-installing-GNU-CC-on-VMS-5"></a>
The VMS version of GNU CC is distributed in a backup saveset containing
both source code and precompiled binaries.

   <p>To install the <span class="file">gcc</span> command so you can use the compiler easily, in
the same manner as you use the VMS C compiler, you must install the VMS CLD
file for GNU CC as follows:

     <ol type=1 start=1>
<li>Define the VMS logical names <span class="samp">GNU_CC</span> and <span class="samp">GNU_CC_INCLUDE</span>
to point to the directories where the GNU CC executables
(<span class="file">gcc-cpp.exe</span>, <span class="file">gcc-cc1.exe</span>, etc.) and the C include files are
kept respectively.  This should be done with the commands:

     <pre class="smallexample">          $ assign /system /translation=concealed -
            disk:[gcc.] gnu_cc
          $ assign /system /translation=concealed -
            disk:[gcc.include.] gnu_cc_include
     </pre>
     <p class="noindent">with the appropriate disk and directory names.  These commands can be
placed in your system startup file so they will be executed whenever
the machine is rebooted.  You may, if you choose, do this via the
<span class="file">GCC_INSTALL.COM</span> script in the <span class="file">[GCC]</span> directory.

     <li>Install the <span class="file">GCC</span> command with the command line:

     <pre class="smallexample">          $ set command /table=sys$common:[syslib]dcltables -
            /output=sys$common:[syslib]dcltables gnu_cc:[000000]gcc
          $ install replace sys$common:[syslib]dcltables
     </pre>
     <li>To install the help file, do the following:

     <pre class="smallexample">          $ library/help sys$library:helplib.hlb gcc.hlp
     </pre>
     <p class="noindent">Now you can invoke the compiler with a command like <span class="samp">gcc /verbose
file.c</span>, which is equivalent to the command <span class="samp">gcc -v -c file.c</span> in
Unix.
        </ol>

   <p>If you wish to use GNU C++ you must first install GNU CC, and then
perform the following steps:

     <ol type=1 start=1>
<li>Define the VMS logical name <span class="samp">GNU_GXX_INCLUDE</span> to point to the
directory where the preprocessor will search for the C++ header files. 
This can be done with the command:

     <pre class="smallexample">          $ assign /system /translation=concealed -
            disk:[gcc.gxx_include.] gnu_gxx_include
     </pre>
     <p class="noindent">with the appropriate disk and directory name.  If you are going to be
using a C++ runtime library, this is where its install procedure will install
its header files.

     <li>Obtain the file <span class="file">gcc-cc1plus.exe</span>, and place this in the same
directory that <span class="file">gcc-cc1.exe</span> is kept.

     <p>The GNU C++ compiler can be invoked with a command like <span class="samp">gcc /plus
/verbose file.cc</span>, which is equivalent to the command <span class="samp">g++ -v -c
file.cc</span> in Unix.
        </ol>

   <p>We try to put corresponding binaries and sources on the VMS distribution
tape.  But sometimes the binaries will be from an older version than the
sources, because we don't always have time to update them.  (Use the
<span class="samp">/version</span> option to determine the version number of the binaries and
compare it with the source file <span class="file">version.c</span> to tell whether this is
so.)  In this case, you should use the binaries you get to recompile the
sources.  If you must recompile, here is how:

     <ol type=1 start=1>
<li>Execute the command procedure <span class="file">vmsconfig.com</span> to set up the files
<span class="file">tm.h</span>, <span class="file">config.h</span>, <span class="file">aux-output.c</span>, and <span class="file">md.</span>, and
to create files <span class="file">tconfig.h</span> and <span class="file">hconfig.h</span>.  This procedure
also creates several linker option files used by <span class="file">make-cc1.com</span> and
a data file used by <span class="file">make-l2.com</span>.

     <pre class="smallexample">          $ @vmsconfig.com
     </pre>
     <li>Setup the logical names and command tables as defined above.  In
addition, define the VMS logical name <span class="samp">GNU_BISON</span> to point at the
to the directories where the Bison executable is kept.  This should be
done with the command:

     <pre class="smallexample">          $ assign /system /translation=concealed -
            disk:[bison.] gnu_bison
     </pre>
     <p>You may, if you choose, use the <span class="file">INSTALL_BISON.COM</span> script in the
<span class="file">[BISON]</span> directory.

     <li>Install the <span class="samp">BISON</span> command with the command line:

     <pre class="smallexample">          $ set command /table=sys$common:[syslib]dcltables -
            /output=sys$common:[syslib]dcltables -
            gnu_bison:[000000]bison
          $ install replace sys$common:[syslib]dcltables
     </pre>
     <li>Type <span class="samp">@make-gcc</span> to recompile everything, or submit the file
<span class="file">make-gcc.com</span> to a batch queue.  If you wish to build the GNU C++
compiler as well as the GNU CC compiler, you must first edit
<span class="file">make-gcc.com</span> and follow the instructions that appear in the
comments.

     <li>In order to use GCC, you need a library of functions which GCC compiled code
will call to perform certain tasks, and these functions are defined in the
file <span class="file">libgcc2.c</span>.  To compile this you should use the command procedure
<span class="file">make-l2.com</span>, which will generate the library <span class="file">libgcc2.olb</span>. 
<span class="file">libgcc2.olb</span> should be built using the compiler built from
the same distribution that <span class="file">libgcc2.c</span> came from, and
<span class="file">make-gcc.com</span> will automatically do all of this for you.

     <p>To install the library, use the following commands:

     <pre class="smallexample">          $ library gnu_cc:[000000]gcclib/delete=(new,eprintf)
          $ library gnu_cc:[000000]gcclib/delete=L_*
          $ library libgcc2/extract=*/output=libgcc2.obj
          $ library gnu_cc:[000000]gcclib libgcc2.obj
     </pre>
     <p>The first command simply removes old modules that will be replaced with
modules from <span class="file">libgcc2</span> under different module names.  The modules
<code>new</code> and <code>eprintf</code> may not actually be present in your
<span class="file">gcclib.olb</span>&mdash;if the VMS librarian complains about those modules
not being present, simply ignore the message and continue on with the
next command.  The second command removes the modules that came from the
previous version of the library <span class="file">libgcc2.c</span>.

     <p>Whenever you update the compiler on your system, you should also update the
library with the above procedure.

     <li>You may wish to build GCC in such a way that no files are written to the
directory where the source files reside.  An example would be the when
the source files are on a read-only disk.  In these cases, execute the
following DCL commands (substituting your actual path names):

     <pre class="smallexample">          $ assign dua0:[gcc.build_dir.]/translation=concealed, -
                   dua1:[gcc.source_dir.]/translation=concealed  gcc_build
          $ set default gcc_build:[000000]
     </pre>
     <p class="noindent">where the directory <span class="file">dua1:[gcc.source_dir]</span> contains the source
code, and the directory <span class="file">dua0:[gcc.build_dir]</span> is meant to contain
all of the generated object files and executables.  Once you have done
this, you can proceed building GCC as described above.  (Keep in mind
that <span class="file">gcc_build</span> is a rooted logical name, and thus the device
names in each element of the search list must be an actual physical
device name rather than another rooted logical name).

     <li><strong>If you are building GNU CC with a previous version of GNU CC,
you also should check to see that you have the newest version of the
assembler</strong>.  In particular, GNU CC version 2 treats global constant
variables slightly differently from GNU CC version 1, and GAS version
1.38.1 does not have the patches required to work with GCC version 2. 
If you use GAS 1.38.1, then <code>extern const</code> variables will not have
the read-only bit set, and the linker will generate warning messages
about mismatched psect attributes for these variables.  These warning
messages are merely a nuisance, and can safely be ignored.

     <li>If you want to build GNU CC with the VAX C compiler, you will need to
make minor changes in <span class="file">make-cccp.com</span> and <span class="file">make-cc1.com</span>
to choose alternate definitions of <code>CC</code>, <code>CFLAGS</code>, and
<code>LIBS</code>.  See comments in those files.  However, you must
also have a working version of the GNU assembler (GNU as, aka GAS) as
it is used as the back end for GNU CC to produce binary object modules
and is not included in the GNU CC sources.  GAS is also needed to
compile <span class="file">libgcc2</span> in order to build <span class="file">gcclib</span> (see above);
<span class="file">make-l2.com</span> expects to be able to find it operational in
<span class="file">gnu_cc:[000000]gnu-as.exe</span>.

     <p>To use GNU CC on VMS, you need the VMS driver programs
<span class="file">gcc.exe</span>, <span class="file">gcc.com</span>, and <span class="file">gcc.cld</span>.  They are
distributed with the VMS binaries (<span class="file">gcc-vms</span>) rather than the
GNU CC sources.  GAS is also included in <span class="file">gcc-vms</span>, as is Bison.

     <p>Once you have successfully built GNU CC with VAX C, you should use the
resulting compiler to rebuild itself.  Before doing this, be sure to
restore the <code>CC</code>, <code>CFLAGS</code>, and <code>LIBS</code> definitions in
<span class="file">make-cccp.com</span> and <span class="file">make-cc1.com</span>.  The second generation
compiler will be able to take advantage of many optimizations that must
be suppressed when building with other compilers.
        </ol>

   <p>Under previous versions of GNU CC, the generated code would occasionally
give strange results when linked with the sharable <span class="file">VAXCRTL</span> library. 
Now this should work.

   <p>Even with this version, however, GNU CC itself should not be linked with
the sharable <span class="file">VAXCRTL</span>.  The version of <code>qsort</code> in
<span class="file">VAXCRTL</span> has a bug (known to be present in VMS versions V4.6
through V5.5) which causes the compiler to fail.

   <p>The executables are generated by <span class="file">make-cc1.com</span> and
<span class="file">make-cccp.com</span> use the object library version of <span class="file">VAXCRTL</span> in
order to make use of the <code>qsort</code> routine in <span class="file">gcclib.olb</span>.  If
you wish to link the compiler executables with the shareable image
version of <span class="file">VAXCRTL</span>, you should edit the file <span class="file">tm.h</span> (created
by <span class="file">vmsconfig.com</span>) to define the macro <code>QSORT_WORKAROUND</code>.

   <p><code>QSORT_WORKAROUND</code> is always defined when GNU CC is compiled with
VAX C, to avoid a problem in case <span class="file">gcclib.olb</span> is not yet
available. 
<hr />
<p><a href="./index.html">Return to the GCC Installation page</a>

<!-- ***GFDL******************************************************************** -->
<!-- *************************************************************************** -->
<!-- Part 6 The End of the Document -->
</body></html>

