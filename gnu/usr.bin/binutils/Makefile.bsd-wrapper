#	$OpenBSD: Makefile.bsd-wrapper,v 1.7 1996/11/23 03:32:21 niklas Exp $

MAN=		binutils/ar.1 binutils/nlmconv.1 binutils/nm.1 \
		binutils/objcopy.1 binutils/objdump.1 binutils/ranlib.1 \
		binutils/size.1 binutils/strings.1 binutils/strip.1 \
		gas/doc/as.1 ld/ld.1

SUBDIRS=	libiberty opcodes bfd
# When enabling gdb, enable these too
.if (${MACHINE_ARCH} != "mips") && (${MACHINE_ARCH} != "alpha")
SUBDIRS+=	mmalloc readline 
.endif
SUBDIRS+=	binutils ld gas
# GDB not ready yet
.if (${MACHINE_ARCH} != "mips") && (${MACHINE_ARCH} != "alpha")
SUBDIRS+=	gdb
.endif
	
all:	config.status
	${MAKE} CC="${CC}" CFLAGS="${CFLAGS} ${COPTS}" LDFLAGS=${LDSTATIC} \
		SUBDIRS="${SUBDIRS}"

.FORCE:	.IGNORE

config: .FORCE
	-rm -f config.cache
	sh ${.CURDIR}/configure --prefix=/usr

config.status:
	sh ${.CURDIR}/configure --prefix=/usr

install: maninstall
	${MAKE} prefix=${DESTDIR}/usr infodir=${DESTDIR}/usr/share/info \
		bindir=${DESTDIR}/usr/bin INSTALL_MAN= install

clean cleandir:
	-@if [ -e Makefile ]; then ${MAKE} distclean; fi

depend:
	# Nothing here so far...

lint:
	# Nothing here so far...

tags:
	# Nothing here so far...

.include <bsd.obj.mk>
.include <bsd.subdir.mk>
.include <bsd.man.mk>
