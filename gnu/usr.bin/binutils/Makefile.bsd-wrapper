#	$OpenBSD: Makefile.bsd-wrapper,v 1.15 1997/06/23 12:13:46 kstailey Exp $

MAN=		binutils/ar.1 binutils/nm.1 \
		binutils/objcopy.1 binutils/objdump.1 binutils/ranlib.1 \
		binutils/size.1 binutils/strings.1 binutils/strip.1 \
		gas/doc/as.1 gprof/gprof.1 ld/ld.1

SUBDIRS=	libiberty opcodes bfd
# gdb not ready yet
.if (${MACHINE_ARCH} != "powerpc")
SUBDIRS+=	gdb mmalloc readline 
MAN+=		gdb/gdb.1 
.endif



SUBDIRS+=	binutils ld gas
	
all:	config.status
	${MAKE} CC="${CC}" CFLAGS="${CFLAGS} ${COPTS}" LDFLAGS=${LDSTATIC} \
		SUBDIRS="${SUBDIRS}"

.FORCE:	.IGNORE

config: .FORCE
	-rm -f config.cache
	sh ${.CURDIR}/configure --prefix=/usr --disable-gdbtk

config.status:
	sh ${.CURDIR}/configure --prefix=/usr --disable-gdbtk

.ifdef NOMAN
maninstall:
	@echo NOMAN is set
.endif

install: maninstall
	${MAKE} prefix=${DESTDIR}/usr infodir=${DESTDIR}/usr/share/info \
		bindir=${DESTDIR}/usr/bin INSTALL_MAN= install

clean cleandir:
	-@if [ -e Makefile ]; then ${MAKE} distclean; fi

depend:
	# Nothing here so far...

lint:
	# Nothing here so far...

tags:
	# Nothing here so far...

.include <bsd.obj.mk>
.include <bsd.subdir.mk>
.ifndef NOMAN
.include <bsd.man.mk>
.endif
