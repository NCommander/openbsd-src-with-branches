#! /usr/bin/perl

# $OpenBSD$
use Test::Simple tests => 4;
use OpenBSD::PackingList;

sub make_plist
{
	my $p = OpenBSD::PackingList->new;
	OpenBSD::PackingElement::ExtraInfo->add($p, shift, '', '');
	for my $path (@_) {
		OpenBSD::PackingElement::PkgPath->add($p, $path);
	}
	return $p;
}


my $p1 = make_plist('path1');
my $p1bis = make_plist('path1');
my $p2 = make_plist('path2');
my $p2bis = make_plist('path2', 'path1');
my $p3 = make_plist('path3', 'path1');

ok($p1->match_pkgpath($p1bis), "same path matches");
ok(!$p1->match_pkgpath($p2), "different paths don't");
ok($p1->match_pkgpath($p2bis), "look into the list too");
ok(!$p2bis->match_pkgpath($p3), "extra elements can't match by themselves");
