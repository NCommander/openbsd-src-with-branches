#	$OpenBSD$

NOMAN=
PROG=getopt_long_test

# test getopt_long and getopt_long_only
run-regress-${PROG}: ${PROG}
	@( test -n "$$POSIXLY_CORRECT" && unset POSIXLY_CORRECT; \
	  test -n "$$LONG_ONLY" && unset LONG_ONLY; \
	  ./${PROG} myfile --force -f infile -9 ; \
	  ./${PROG} onefile twofile --best --illiterate -i foo.in threefile ; \
	  ./${PROG} --fast --drinking guiness -i foo.in somefile ; \
	  export POSIXLY_CORRECT=1 ; \
	  ./${PROG} myfile --force -f infile -9 ; \
	  ./${PROG} onefile twofile --best --illiterate -i foo.in threefile ; \
	  ./${PROG} --fast --drinking guiness -i foo.in somefile ; \
	  unset POSIXLY_CORRECT ; export LONG_ONLY=1 ; \
	  ./${PROG} myfile -force -f infile -9 ; \
	  ./${PROG} onefile twofile --best -illiterate -i foo.in threefile ; \
	  ./${PROG} --fast -drinking guiness -i foo.in somefile ; \
	  export POSIXLY_CORRECT=1 ; \
	  ./${PROG} myfile -force -f infile -9 ; \
	  ./${PROG} onefile twofile --best -illiterate -i foo.in threefile ; \
	  ./${PROG} --fast -drinking guiness -i foo.in somefile ) >test.out 2>&1
	cmp -s ${.OBJDIR}/test.out ${.CURDIR}/test.ok

.include <bsd.regress.mk>
