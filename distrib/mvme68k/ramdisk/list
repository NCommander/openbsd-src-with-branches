#	$OpenBSD: list,v 1.9 2001/07/26 20:21:17 deraadt Exp $
SRCDIRS distrib/special
SRCDIRS usr.bin bin sbin usr.sbin gnu/usr.bin
SRCDIRS usr.sbin/pppd
SRCDIRS usr.bin/vi

# copy the crunched binary, link to it, and kill it
COPY	${OBJDIR}/instbin	instbin
LINK	instbin			bin/cat
LINK	instbin			bin/chmod bin/chgrp sbin/chown
LINK	instbin			bin/cp
LINK	instbin			bin/dd
LINK	instbin			bin/df
LINK	instbin			bin/ed
LINK	instbin			bin/expr
LINK	instbin			bin/hostname
LINK	instbin			bin/ln
LINK	instbin			bin/ls
LINK	instbin			bin/mkdir
LINK	instbin			bin/mt
LINK	instbin			bin/mv
LINK	instbin			bin/pax bin/tar bin/cpio
LINK	instbin			bin/rm
LINK	instbin			bin/ksh bin/sh
ARGVLINK ksh			-sh
#LINK	instbin			bin/sleep
LINK	instbin			bin/stty
#LINK	instbin			bin/sync
LINK	instbin			bin/test bin/[
#LINK	instbin			sbin/dhclient
LINK	instbin			sbin/disklabel
LINK	instbin			sbin/fsck
LINK	instbin			sbin/fsck_ffs
LINK	instbin			sbin/reboot sbin/halt
LINK	instbin			sbin/ifconfig
LINK	instbin			sbin/init
LINK	instbin			sbin/mknod
LINK	instbin			sbin/mount
LINK	instbin			sbin/mount_cd9660
LINK	instbin			sbin/mount_ffs
LINK	instbin			sbin/mount_nfs
LINK	instbin			sbin/mount_kernfs
LINK	instbin			sbin/newfs
LINK	instbin			sbin/ping
#LINK	instbin			sbin/restore
LINK	instbin			sbin/route
#LINK	instbin			sbin/slattach
#LINK	instbin			sbin/scsi
LINK	instbin			sbin/umount
LINK	instbin			usr/bin/awk
LINK	instbin			usr/bin/grep usr/bin/fgrep usr/bin/egrep
LINK	instbin			usr/bin/less usr/bin/more
LINK	instbin			usr/bin/rsh
LINK	instbin			usr/bin/sort
#LINK	instbin			usr/bin/tip
LINK	instbin			usr/bin/tr
LINK	instbin			usr/sbin/chat
LINK	instbin			usr/sbin/pppd
SYMLINK ../../instbin           usr/bin/build usr/bin/vi
SYMLINK	../../instbin		usr/bin/ftp
SYMLINK	../../instbin		usr/bin/gzip usr/bin/gunzip usr/bin/gzcat
SYMLINK	../../instbin		usr/bin/sed

# copy the MAKEDEV script and make some devices
COPY	${DESTDIR}/dev/MAKEDEV	dev/MAKEDEV
SPECIAL	cd dev; sh MAKEDEV raminst
SPECIAL	/bin/rm dev/MAKEDEV

# we need the contents of /usr/mdec
COPY	${DESTDIR}/usr/mdec/netboot	usr/mdec/netboot
COPY	${DESTDIR}/usr/mdec/bootxx	usr/mdec/bootxx
COPY	${DESTDIR}/usr/mdec/bootsd	usr/mdec/bootsd
COPY	${DESTDIR}/usr/mdec/installboot	usr/mdec/installboot

# various files that we need in /etc for the install
COPY	${DESTDIR}/etc/group		etc/group
COPY	${DESTDIR}/etc/protocols	etc/protocols
COPY	${DESTDIR}/etc/services		etc/services
COPY	${DESTDIR}/etc/spwd.db		etc/spwd.db
COPY	${DESTDIR}/etc/disktab		etc/disktab
COPY	disktab.preinstall		etc/disktab.preinstall
SYMLINK	/tmp/disktab.shadow		etc/disktab      
SYMLINK	/tmp/fstab.shadow		etc/fstab
SYMLINK	/tmp/resolv.conf.shadow		etc/resolv.conf
SYMLINK	/tmp/hosts			etc/hosts

COPYDIR	${DESTDIR}/etc/ppp		etc/ppp

# we strip comments from files since we need the space...

# and the common installation tools
SPECIAL	sed -e '/^#[ 	].*$/d' < ${TOPDIR}/common/dot.commonutils > .commonutils
SPECIAL	sed -e '/^#[ 	].*$/d' < ${TOPDIR}/common/termcap.vt > usr/share/misc/termcap

# and the installation tools
SPECIAL	sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' < ${CURDIR}/dot.profile > .profile
SPECIAL	sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' < ${CURDIR}/dot.instutils > .instutils
SPECIAL sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' -e "s/^ARCH=ARCH$/ARCH=`arch -s`/" < ${CURDIR}/install.md > install.md
SPECIAL	sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' < ${CURDIR}/../../miniroot/install.sh > install
SPECIAL	sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' < ${CURDIR}/../../miniroot/upgrade.sh > upgrade
SPECIAL	sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' < ${CURDIR}/install.sub > install.sub
#SPECIAL sed -e '/^[ 	]*#[ 	].*$/d' -e '/^[ 	]*#$/d' -e "/^VERSION=/s/=.*/=${REV}/" < ${CURDIR}/../../miniroot/install.sub > install.sub

SPECIAL	chmod 755 install upgrade
