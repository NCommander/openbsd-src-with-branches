#	$OpenBSD: list,v 1.3 2001/06/23 19:45:00 deraadt Exp $

# Sun3 extras
LINK	instbin			sbin/disklabel
LINK	instbin			sbin/dmesg
LINK	instbin			sbin/dhclient

SYMLINK	../../instbin		usr/bin/basename
SYMLINK ../../instbin		usr/bin/cksum usr/bin/sum
SYMLINK ../../instbin		usr/bin/cut
SYMLINK ../../instbin		usr/bin/getopt
SYMLINK ../../instbin		usr/bin/grep usr/bin/egrep usr/bin/fgrep
SYMLINK ../../instbin		usr/bin/netstat
SYMLINK ../../instbin		usr/bin/rsh
SYMLINK ../../instbin		usr/bin/strings
SYMLINK ../../instbin		usr/bin/tset usr/bin/reset
SYMLINK	../../instbin		usr/bin/less usr/bin/more
SYMLINK	../../instbin		usr/sbin/installboot
SYMLINK	../../instbin		usr/sbin/sysctl

SRCDIRS	sys/arch/sun3/stand

# crunchgen source directory specials
#CRUNCHSPECIAL installboot srcdir sys/arch/sun3/stand/installboot

# Minimize use of MFS
SYMLINK	/tmp	var/tmp

# copy the MAKEDEV script and make some devices
COPY	${DESTDIR}/dev/MAKEDEV		dev/MAKEDEV
COPY	${DESTDIR}/dev/MAKEDEV.local	dev/MAKEDEV.local
SPECIAL	cd dev; sh MAKEDEV all
#SPECIAL	/bin/rm dev/MAKEDEV

# we need the contents of /usr/mdec
COPY	${DESTDIR}/usr/mdec/bootxx	/usr/mdec/bootxx
COPY	${DESTDIR}/usr/mdec/ufsboot	/usr/mdec/ufsboot

# and a few useful bits of the termcap file (512K and still growing 8-)
SPECIAL tic -C ${CURDIR}/../../share/termtypes/termtypes.master | sed -n -e 's,/usr/share/lib/tabset,/usr/share/tabset,g' -e 's,/usr/lib/tabset,/usr/share/tabset,g' -e '/^dumb|/,/:[ 	]*$/p' -e '/^unknown|/,/:[ 	]*$/p' -e '/^sun.*|/,/:[ 	]*$/p' -e '/^vt.*|/,/:[ 	]*$/p' -e '/^pc3|/,/:[ 	]*$/p' -e '/^pcvt.*|/,/:[ 	]*$/p' > usr/share/misc/termcap

# copy the kernel
COPY	bsd	bsd

# various files that we need in /etc for the install
COPY	${DESTDIR}/etc/disktab		etc/disktab.shadow
SYMLINK	/tmp/disktab.shadow		etc/disktab
SYMLINK	/tmp/fstab.shadow		etc/fstab
SYMLINK	/tmp/resolv.conf.shadow		etc/resolv.conf
SYMLINK	/tmp/hosts			etc/hosts

# and the installation tools
COPY	${ARCHDIR}/dot.profile		.profile
SPECIAL sed -e '/^#[ 	].*$/d' -e "s/^ARCH=ARCH$/ARCH=`arch -ks`" < ${CURDIR}/../common/install.md	 > install.md
COPY	${DESTDIR}/usr/mdec/ufsboot	boot
SPECIAL sync; ${DESTDIR}/usr/mdec/installboot ${TARGDIR}/boot ${DESTDIR}/usr/mdec/bootxx /dev/rsvnd0c
