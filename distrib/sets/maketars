#!/bin/sh
#	$OpenBSD: maketars,v 1.13 2001/12/25 01:30:22 deraadt Exp $


RELEASE=$1

if [ "X${RELEASE}" == "X" ]; then
	echo "Usage: `basename $0` <OSREVISION>"
	exit 1
fi

if [ "X${RELEASEDIR}" = "X" ]; then
	echo RELEASEDIR must be set
	exit 1
fi

if [ "X${DESTDIR}" = "X" ]; then
	echo DESTDIR must be set
	exit 1
fi

arch=`machine`
lists=`pwd`/lists
tardir=$RELEASEDIR
fsdir=$DESTDIR

cd $fsdir

for i in base comp etc game man misc; do
	echo -n "$i: "
	cat ${lists}/$i/mi ${lists}/$i/md.${arch} | sort | \
	    pax -w -d | gzip -9 > ${tardir}/$i${RELEASE}.tgz
	echo    "done."
done
