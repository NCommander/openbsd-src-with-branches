To be able to boot the OpenBSD/MACHINE installation program, you will
need to acquire some limited knowledge of OpenFirmware, the low-level
process that controls the microprocessor after hardware initialization
and diagnostics are performed but before control is handed to the
operating system.

To access Open Firmware you should simultaneously hold down the
Command, Option, O and F keys immediately upon booting.  You will
be presented with information and a ">" prompt that will look something
like this (example taken from a Power Macintosh G4):

Apple PowerMac3,1 2.4f1 BootROM built on 02/18/00 at 09:44:35
Copyright 1994-2000 Apple Computer, Inc.
All Rights Reserved

Welcome to Open Firmware
To continue booting, type "mac-boot" and press return
To shut down, type "shut-down" and press return

 ok
0 >


Important Open Firmware command examples:

boot cd:,ofwboot /OSREV/MACHINE/bsd.rd
		(boot from an appropriately prepared
		OpenBSD CD in the CD/DVD drive)

boot enet:,ofwboot /bsd.rd
		(netboot from a pre-configured bootp/tftp/nfs
		server containing the "ofwboot" and "bsd.rd"
		files at the root directory of the tftp server)

boot ide1:,ofwboot /bsd
		(After installation, boot /bsd from the slave
		 device on the second ATA bus)

mac-boot	(boot into MacOS)
reset-all	(reboot the machine)
shut-down	(halt the machine; shutdown)
printenv	(print current machine variables)
setenv		(set a machine variable)
devalias	(list device aliases; useful for locating other
		devices in the machine such as hard drives etc)

As seen above, device aliases typically take the form of "ide", "cd"
etc.  To boot to an alternative device you may substitute them
with entries from this list (example devices taken from a Power
Macintosh G4):

ultra0 = hd = master device, primary ATA bus (factory-installed drive)
ultra1 =      slave device, primary ATA bus
ide0   = cd = master device, secondary ATA bus (CD/DVD drive)
ide1   =      slave device, secondary ATA bus (Zip drive, if installed)
enet   =      motherboard ethernet device


Other Open Firmware command examples:

setenv auto-boot? false
		(force the machine to wait at Open Firmware
		for user input at next reboot; options are true/false)

setenv boot-device ide:,ofwboot /bsd
		(force the machine to boot into OpenBSD
		automatically at next reboot)

dev /		(change to root level of the device tree)
pwd		(show current location in the device tree)
ls		(show items at current location in the device tree)
words		(show methods of items at current location in the device tree)
.properties	(show properties of items at current location in the device tree)


To reset a Power Macintosh to the factory-configure Open Firmware settings,
simultaneously hold down the Command, Option, P, R keys immediately upon
booting.  Typically the machine will then attempt to load Mac OS, if
available.


Sharing a disk with MacOS:

OpenBSD/MACHINE is now capable of booting either from a dedicated
disk using a MBR partitioned disk or sharing a disk with MacOS.

If the disk is to be shared between MacOS and OpenBSD, it is necessary
to reformat and install the MacOS partitions first, using "Drive Setup",
leaving space on the disk as an "Unused" partition.
If the disk was previously partitioned, it is possible to reuse a Pariti on
for OpenBSD, as long as it is not the first Pariti on on the disk.
The bootloader is expected to be found in that first (HFS) Pariti on.

For dedicated disks, MACHINE port boots off a boot program in
an MSDOS filesystem. This is now set up by the install program
and no special setup is required.
